---
/**
 * HOME PAGE
 * src/pages/index.astro
 *
 * This is the home page of the website.
 */

// Global Components
import Layout from "../layouts/Layout.astro";
import { ContactSection } from "../components/global/ContactSection";
import UpcomingShows from "../components/global/UpcomingShows.astro";

// Local Components
import Header30 from "../components/home/Header30.astro";
import { Layout208 } from "../components/home/Layout208";
import Testimonial4 from "../components/home/Testimonial4.astro";
import { Event31 } from "../components/home/Event31";
import Logo2 from "../components/home/Logo2.astro";

// Images
import testimonialBackgroundImage from "../assets/images/hero-1.jpg";
import testimonialAvatarImage from "../assets/images/angelique-buckley-rockstar-pose.jpg";

// Data
import heroImage from "../assets/images/angelique-buckley-rockstar-pose.jpg";

// Functions
import { executeQuery } from "../lib/sanity";

// Constants
const today = new Date();
const startDate = today.toISOString();
const numberOfGigs = 5;
const whereStatement = `where: {date: {gte: "${startDate}"}}`;
const sortStatement = `sort: [{date: ASC}]`;
const limitStatement = `limit: ${numberOfGigs}`;
const query = `
  {
    allEvent(${whereStatement}, ${sortStatement}, ${limitStatement}) {
      date
      showType
      venue {
        name
        address {
          city
          state
        }
        slug {
          current
        }
      }
      slug {
        current
      }
    }
  }
`;

const response = (await executeQuery(query)) as any;
const events = response?.allEvent ?? [];

// --- CONTENT --- //
// Hero Copy
const heading = "The Benderz";
const subheading = ["Not just a cover band.", "A party you'll never forget."];
const button = {
  title: "Let's Party",
  href: "/contact",
};

// Youtube Data
const youtubeEmbedUrl = "https://www.youtube.com/embed/tasi6UpOaO8";
const youtubeThumbnailUrl = "https://i.ytimg.com/vi/tasi6UpOaO8/hqdefault.jpg";

// Testimonial Data
const quote =
  "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros dolor interdum nulla, ut commodo diam libero vitae erat.";
const author = "John Doe";
const title = "CEO, Company Name";
const avatarImage = testimonialAvatarImage;
const backgroundImage = testimonialBackgroundImage;
---

<Layout>
  <Header30
    imageMetaData={heroImage}
    heading={heading}
    subheading={subheading}
    button={button}
  />
  <Layout208
    client:load
    youtubeEmbedUrl={youtubeEmbedUrl}
    youtubeThumbnailUrl={youtubeThumbnailUrl}
  />
  <Testimonial4
    quote={quote}
    author={author}
    title={title}
    avatarImage={avatarImage}
    backgroundImage={backgroundImage}
  />
  <!-- <Event31 client:load /> -->
  <UpcomingShows events={events} />
  <Logo2 />
  <ContactSection
    heading="Get in Touch"
    body="Need a party band for your club, private event, or wedding? Let's talk!"
    client:load
  />
</Layout>
