---
export const prerender = true;

import type { GetStaticPaths } from "astro";

import Layout from "../../layouts/Layout.astro";
import PortfolioHeader1 from "../../components/venue/PortfolioHeader1.astro";
import EventDetails from "../../components/event/EventDetails.astro";

import { getDate, getTime } from "../../lib/dateHelpers";
import { getAllEvents } from "../../lib/sanity";
import type { Event } from "../../types/types";

export const getStaticPaths = (async () => {
  const events = await getAllEvents();

  return events.map((event: Event) => ({
    params: {
      event: `/${event.slug.current}`,
    },
    props: { event: event },
  }));
}) satisfies GetStaticPaths;

type EventProps = {
  event: Event;
};

const { event } = Astro.props as EventProps;
---

<Layout>
  <PortfolioHeader1
    headline={getDate(event.date)}
    subtext={`${event.venue.name}, ${event.venue.address.city}, ${event.venue.address.state}`}
    coverImage={event.venue.coverImage.asset.url}
  />
  <EventDetails event={event} />
</Layout>
