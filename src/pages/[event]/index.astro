---
export const prerender = true;

import type { GetStaticPaths } from "astro";

import Layout from "../../layouts/Layout.astro";
import PortfolioHeader1 from "../../components/venue/PortfolioHeader1.astro";

import { getDate, getTime } from "../../lib/dateHelpers";
import { getOldEvents } from "../../lib/sanity";
import type { Event } from "../../types/types";

export const getStaticPaths = (async () => {
  const events = await getOldEvents();

  console.log("[event-page] events", events);

  return events.map((event: Event) => ({
    params: {
      event: `/${event.slug.current}`,
    },
    props: { eventData: event },
  }));
}) satisfies GetStaticPaths;

type EventProps = {
  eventData: Event;
};

const { eventData } = Astro.props as EventProps;
---

<Layout>
  <PortfolioHeader1
    headline={getDate(eventData.date)}
    venueName={eventData.venue.name}
    coverImage={eventData.venue.coverImage.asset.url}
  />
</Layout>
