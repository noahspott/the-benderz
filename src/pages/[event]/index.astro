---
/**
 * Event Page
 * src/pages/[event]/index.astro
 *
 * To display a single event
 *
 */
export const prerender = true;

import Layout from "../../layouts/Layout.astro";
import { TitleHeaderSubpage } from "../../components";
import EventDetails from "../../components/event/EventDetails.astro";

import { getDate, getTime, formatShowDate } from "../../lib/dateHelpers";
import { getAllEvents } from "../../lib/sanity";
import type { Event } from "../../types/types";

export async function getStaticPaths() {
  const events = await getAllEvents();

  return events.map((event: Event) => ({
    params: {
      event: `/${event.slug.current}`,
    },
    props: { event: event },
  }));
}

type EventProps = {
  event: Event;
};

const { event } = Astro.props as EventProps;
---

<Layout
  title={`${event.venue.name} ${formatShowDate(event.date)} | The Benderz`}
>
  <TitleHeaderSubpage
    headline={formatShowDate(event.date)}
    description={`${event.venue.name}, ${event.venue.address.city}, ${event.venue.address.state}`}
  />
  <!-- <PortfolioHeader1
    headline={getDate(event.date)}
    subtext={`${event.venue.name}, ${event.venue.address.city}, ${event.venue.address.state}`}
    coverImage={event.venue?.coverImage?.asset?.url}
  /> -->
  <EventDetails event={event} />
</Layout>
